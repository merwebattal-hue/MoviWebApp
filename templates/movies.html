{% extends "base.html" %}

{% block content %}

  <a href="{{ url_for('startseite') }}">&larr; Back to Users</a>

  <h2>Movies for {{ benutzer.name }}</h2>

  <form method="post" action="{{ url_for('film_hinzufuegen', benutzer_id=benutzer.id) }}" class="row">
    <input name="titel" placeholder="Filmtitel eingeben (z.B. Inception)" required />
    <button class="btn" type="submit">Hinzuf√ºgen</button>
  </form>

  <div class="grid">
    {% for film in filme %}
      <div class="card">

        <div class="card-head">
          <h3>{{ film.titel }}</h3>
          <small>{{ film.jahr or "" }}</small>
        </div>

        <p><strong>Director:</strong> {{ film.director or "Unbekannt" }}</p>

        {% if film.poster_url and film.poster_url != "N/A" %}
          <img src="{{ film.poster_url }}" alt="Poster" class="poster">
        {% endif %}

        <form method="post"
              action="{{ url_for('film_aktualisieren', benutzer_id=benutzer.id, film_id=film.id) }}"
              class="row">
          <input name="neuer_titel" value="{{ film.titel }}" />
          <button class="btn" type="submit">Update</button>
        </form>

        <form method="post"
              action="{{ url_for('film_loeschen', benutzer_id=benutzer.id, film_id=film.id) }}">
          <button class="btn danger" type="submit">Delete</button>
        </form>

      </div>
    {% else %}
      <p>Noch keine Filme.</p>
    {% endfor %}
  </div>

{% endblock %}